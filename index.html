<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pet Leveling Hilfe</title>
<style>
:root {
  --bg: #0b0b0b;
  --card: #1a1a1a;
  --text: #f5f5f5;
  --muted: #aaaaaa;
  --accent: #ffffff;
  --border: rgba(255,255,255,0.08);
  --shadow: 0 10px 30px rgba(0,0,0,0.35);
}
body {
  margin:0;
  min-height:100vh;
  overflow-y:auto;
  overflow-x:hidden;
  font-family: sans-serif;
  background:#0b0b0b;
  display:flex;
  flex-direction:column;
  align-items:center;
  perspective:1200px;
}
canvas {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:0;
}
.card, .credit-card {
  width: calc(100% - 56px);
  max-width: 560px;
  background: var(--card);
  border-radius: 18px;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  padding: 28px;
  color: var(--text);
  transform-style: preserve-3d;
  transition: transform 0.3s ease;
  z-index:1;
  margin-bottom:20px;
  box-sizing: border-box;
}
h1 { text-align:center; margin-bottom:18px;}
label { display:block; margin:8px 0 4px; font-size:13px; color:var(--muted);}
input, textarea {
  width: calc(100% - 26px);
  padding:10px 12px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:transparent;
  color:var(--text);
  outline:none;
  box-sizing:border-box;
  height: 40px;
}
.row { display:grid; grid-template-columns:1fr 1fr; gap:12px;}
.btn {
  width:100%;
  padding:12px;
  border:none;
  border-radius:10px;
  background:var(--accent);
  color:#000;
  font-weight:bold;
  cursor:pointer;
}
.status { margin-top:8px; font-size:14px; text-align:center;}
.credit-card {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:20px;
}
.credit-left, .credit-right { display:flex; flex-direction:column; gap:12px;}
.credit-item { display:flex; align-items:center; gap:10px;}
.credit-item img { width:50px; height:50px; border-radius:8px; object-fit:cover;}

.custom-multi-select {
  position: relative;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: transparent;
  color: var(--text);
  user-select: none;
  width: 100%;
  box-sizing: border-box;
  margin-bottom:10px;
  outline: none;
  height: 40px;
  display: flex;
  align-items: center;
}
.custom-multi-select:focus-visible {
  box-shadow: 0 0 0 2px rgba(255,255,255,0.2);
}
.custom-multi-select::after {
  content:"";
  position:absolute;
  right:12px;
  top:50%;
  width:8px;
  height:8px;
  border-right:2px solid var(--muted);
  border-bottom:2px solid var(--muted);
  transform: translateY(-50%) rotate(45deg);
  transition: transform .2s ease;
  pointer-events:none;
}
.custom-multi-select.open::after {
  transform: translateY(-50%) rotate(-135deg);
}
.selected-options {
  padding:10px 12px;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  gap: 6px;
  height: 100%;
}
.selected-options.empty {
  color: var(--muted);
}
.selected-options .tag {
  background: rgba(255,255,255,0.05);
  border: 1px solid #fff;
  border-radius: 6px;
  padding: 4px 8px;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 80px;
}

.options-list {
  position:absolute;
  top: calc(100% + 6px);
  left:0;
  right:0;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transform: scaleY(0.96);
  transform-origin: top;
  transition: max-height .22s ease, opacity .18s ease, transform .22s ease;
  z-index: 20;
  box-shadow: var(--shadow);
}
.options-list.open {
  max-height: 260px;
  overflow-y: auto;
  opacity: 1;
  transform: scaleY(1);
}
.option {
  padding: 10px 12px;
  transition: background 0.2s;
  border-radius: 8px;
  margin: 4px 6px;
  outline: none;
}
.option:hover, .option:focus {
  background: rgba(255,255,255,0.08);
}
.option.selected {
  background: rgba(255,255,255,0.06);
  border: 1px solid #fff;
}

@media (max-width: 480px) {
  .card, .credit-card {
    width: calc(100% - 20px);
    padding: 18px;
    border-radius: 14px;
  }
  h1 { font-size: 1.2rem; margin-bottom: 12px; }
  input, textarea { 
    font-size: 14px; 
    padding: 8px 10px;
    height: 38px;
  }
  .custom-multi-select {
    height: 38px;
  }
  .row { grid-template-columns: 1fr; gap: 8px; }
  .credit-item img { width: 40px; height: 40px; }
  .credit-item div { font-size: 0.9rem; }
  .options-list.open { max-height: 220px; }
  .selected-options .tag {
    max-width: 60px;
  }
}

@media (min-width: 481px) and (max-width: 768px) {
  .card, .credit-card { width: calc(100% - 40px); }
}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<main id="formCard" class="card">
  <h1>Pet Leveling Hilfe</h1>

  <form id="levelForm" autocomplete="on">
    <label for="roblox">Roblox Name</label>
    <input id="roblox" name="roblox" type="text" placeholder="..." required />

    <label for="discord">Discord Name</label>
    <input id="discord" name="discord" type="text" placeholder="..." required />

    <label for="petWanted">Welches pet soll gelevelt werden?</label>
    <input id="petWanted" name="petWanted" type="text" placeholder="..." required />

    <div class="row">
      <div>
        <label for="petCurrent">Momentanes Level</label>
        <input id="petCurrent" name="petCurrent" type="text" placeholder="..." required />
      </div>
      <div>
        <label for="targetLevel">Ziel Level</label>
        <input id="targetLevel" name="targetLevel" type="text" placeholder="..." required />
      </div>
    </div>

    <label for="offerCustom">Was gibst du?</label>
    <div class="row">
      <div>
        <div
          class="custom-multi-select"
          id="offerCustom"
          tabindex="0"
          role="combobox"
          aria-haspopup="listbox"
          aria-expanded="false"
          aria-multiselectable="true"
        >
          <div class="selected-options empty" id="selectedDisplay">Bitte auswählen…</div>

          <div class="options-list" id="offerOptions" role="listbox" aria-label="Angebote auswählen">
            <div class="option" role="option" tabindex="0" data-value="Dragonfly">Dragonfly</div>
            <div class="option" role="option" tabindex="0" data-value="Mimic Octopus">Mimic Octopus</div>
            <div class="option" role="option" tabindex="0" data-value="Red Fox">Red Fox</div>
            <div class="option" role="option" tabindex="0" data-value="Disco Bee">Disco Bee</div>
            <div class="option" role="option" tabindex="0" data-value="Queen Bee">Queen Bee</div>
            <div class="option" role="option" tabindex="0" data-value="French Fry Ferret">French Fry Ferret</div>
            <div class="option" role="option" tabindex="0" data-value="Lobster Thermidor">Lobster Thermidor</div>
            <div class="option" role="option" tabindex="0" data-value="Raccoon">Raccoon</div>
            <div class="option" role="option" tabindex="0" data-value="Fennec Fox">Fennec Fox</div>
            <div class="option" role="option" tabindex="0" data-value="Spinosaurus">Spinosaurus</div>
            <div class="option" role="option" tabindex="0" data-value="T-Rex">T-Rex</div>
          </div>
        </div>
        <input type="hidden" name="offerSelect" id="offerHidden">
      </div>
      <div>
        <label for="offerAmount">Menge</label>
        <input id="offerAmount" name="offerAmount" type="number" placeholder="..." min="1" />
      </div>
    </div>

    <button id="sendBtn" class="btn" type="submit">Anfrage stellen</button>
    <div id="status" class="status"></div>
  </form>
</main>

<main id="creditCard" class="credit-card">
  <div class="credit-left">
    <div class="credit-item">
      <img src="images/image1.jpg" alt="Developer">
      <div><strong>Developer</strong><br>ywxo</div>
    </div>
    <div class="credit-item">
      <img src="images/image2.jpg" alt="Owner">
      <div><strong>Owner</strong><br>saintpscl</div>
    </div>
  </div>
  <div class="credit-right">
    <div class="credit-item">
      <img src="images/image3.png" alt="Discord">
      <div>discord.gg/gaggermany</div>
    </div>
  </div>
</main>

<script>
const WEBHOOK_URL = "";
const form = document.getElementById('levelForm');
const btn = document.getElementById('sendBtn');
const statusEl = document.getElementById('status');

const customSelect = document.getElementById("offerCustom");
const optionsList = document.getElementById("offerOptions");
const selectedDisplay = document.getElementById("selectedDisplay");
const hiddenInput = document.getElementById("offerHidden");
let selectedValues = [];

customSelect.addEventListener("click", (e) => {
  if (!e.target.classList.contains("option")) {
    toggleOptions();
  }
});

optionsList.querySelectorAll(".option").forEach((option, idx) => {
  option.addEventListener("click", (e) => {
    e.stopPropagation();
    toggleValue(option.dataset.value, option);
  });

  option.addEventListener("keydown", (e) => {
    if (e.key === "Enter" || e.key === " ") {
      e.preventDefault();
      toggleValue(option.dataset.value, option);
    } else if (e.key === "ArrowDown") {
      e.preventDefault();
      const next = optionsList.children[Math.min(idx + 1, optionsList.children.length - 1)];
      next.focus();
    } else if (e.key === "ArrowUp") {
      e.preventDefault();
      const prev = optionsList.children[Math.max(idx - 1, 0)];
      prev.focus();
    } else if (e.key === "Escape") {
      closeOptions();
      customSelect.focus();
    }
  });
});

customSelect.addEventListener("keydown", (e) => {
  if (e.key === "Enter" || e.key === " ") {
    e.preventDefault();
    toggleOptions(true);
    const first = optionsList.children[0];
    if (first) first.focus();
  } else if (e.key === "ArrowDown") {
    e.preventDefault();
    openOptions(true);
    const first = optionsList.children[0];
    if (first) first.focus();
  } else if (e.key === "Escape") {
    closeOptions();
  }
});

document.addEventListener("click", (e) => {
  if (!customSelect.contains(e.target)) {
    closeOptions();
  }
});

function toggleOptions(forceOpen) {
  const isOpen = optionsList.classList.contains("open");
  if (forceOpen === true) return openOptions();
  if (isOpen) closeOptions(); else openOptions();
}
function openOptions(updateAria) {
  optionsList.classList.add("open");
  customSelect.classList.add("open");
  customSelect.setAttribute("aria-expanded", "true");
}
function closeOptions() {
  optionsList.classList.remove("open");
  customSelect.classList.remove("open");
  customSelect.setAttribute("aria-expanded", "false");
}

function toggleValue(value, optionEl) {
  const i = selectedValues.indexOf(value);
  if (i >= 0) {
    selectedValues.splice(i, 1);
    optionEl.classList.remove("selected");
    optionEl.setAttribute("aria-selected", "false");
  } else {
    selectedValues.push(value);
    optionEl.classList.add("selected");
    optionEl.setAttribute("aria-selected", "true");
  }
  updateSelectedDisplay();
}

function updateSelectedDisplay() {
  selectedDisplay.innerHTML = "";
  if (selectedValues.length === 0) {
    selectedDisplay.classList.add("empty");
    selectedDisplay.textContent = "Bitte auswählen…";
  } else {
    selectedDisplay.classList.remove("empty");
    selectedValues.forEach(val => {
      const tag = document.createElement("div");
      tag.className = "tag";
      tag.textContent = val;
      selectedDisplay.appendChild(tag);
    });
    
    if (selectedDisplay.scrollWidth > selectedDisplay.clientWidth) {
      selectedDisplay.innerHTML = "";
      const tag = document.createElement("div");
      tag.className = "tag";
      tag.textContent = selectedValues.length + " ausgewählt";
      selectedDisplay.appendChild(tag);
    }
  }
  hiddenInput.value = selectedValues.join(", ");
}

form.addEventListener('submit', async (e) => {
  e.preventDefault();

  if (selectedValues.length === 0) {
    statusEl.textContent = "Bitte wähle mindestens eine Sache im Dropdown aus.";
    return;
  }

  btn.disabled = true;
  statusEl.textContent = "Sende …";
  try {
    const offerText = selectedValues.join(", ");
    const amountText = form.offerAmount.value ? `Menge: ${form.offerAmount.value}` : "";

    const embedPayload = {
      embeds: [
        {
          title: `Neue Pet Leveling Anfrage`,
          color: 0x00ff00,
          fields: [
            { name: "Roblox Name", value: form.roblox.value || "–", inline: true },
            { name: "Discord Name", value: form.discord.value || "–", inline: true },
            { name: "Welches Pet?", value: form.petWanted.value || "–", inline: true },
            { name: "Momentanes Level", value: form.petCurrent.value || "–", inline: true },
            { name: "Ziel Level", value: form.targetLevel.value || "–", inline: true },
            { name: "Angebot", value: `${offerText}${amountText ? " | " + amountText : ""}` || "–", inline: false }
          ],
          timestamp: new Date().toISOString()
        }
      ]
    };

    if (!WEBHOOK_URL) {
      console.warn("WEBHOOK_URL ist leer. Eintragen, um zu senden.");
    } else {
      await fetch(WEBHOOK_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(embedPayload)
      });
    }

    statusEl.textContent = "Erfolgreich gesendet ✅";
    form.reset();
    selectedValues = [];
    updateSelectedDisplay();
    optionsList.querySelectorAll(".option.selected").forEach(opt => {
      opt.classList.remove("selected");
      opt.setAttribute("aria-selected","false");
    });
  } catch (err) {
    console.error(err);
    statusEl.textContent = "Fehler beim Senden ❌";
  } finally {
    btn.disabled = false;
  }
});

const canvas = document.getElementById('bgCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let mouseX = null;
let mouseY = null;
const mouseRadius = 90;

let particleCount = 220;
if (window.innerWidth < 600) particleCount = 100;
if (window.innerWidth < 400) particleCount = 60;

const particles = [];
function createParticle() {
  return {
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vx: (Math.random() - 0.5) * 0.2,
    vy: (Math.random() - 0.5) * 0.2,
    size: Math.random() * 4 + 2,
    baseVx: (Math.random() - 0.5) * 0.2,
    baseVy: (Math.random() - 0.5) * 0.2
  };
}
for (let i = 0; i < particleCount; i++) particles.push(createParticle());

let fpsCheck = 0;
let lastTime = performance.now();
function checkFPS() {
  let now = performance.now();
  let delta = now - lastTime;
  lastTime = now;
  let fps = 1000 / delta;
  fpsCheck++;
  if (fpsCheck > 60 && fps < 30 && particleCount > 60) {
    particleCount = Math.floor(particleCount * 0.7);
    particles.length = particleCount;
    fpsCheck = 0;
  }
  requestAnimationFrame(checkFPS);
}
checkFPS();

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let i = 0; i < particles.length; i++) {
    const p1 = particles[i];
    ctx.beginPath();
    for (let j = i + 1; j < particles.length; j++) {
      const p2 = particles[j];
      const dx = p1.x - p2.x;
      const dy = p1.y - p2.y;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < 120) {
        ctx.strokeStyle = 'rgba(255,255,255,' + (1 - dist / 120) + ')';
        ctx.lineWidth = 1.2;
        ctx.moveTo(p1.x, p1.y);
        ctx.lineTo(p2.x, p2.y);
        ctx.stroke();
      }
    }
    ctx.closePath();
  }

  for (let i = 0; i < particles.length; i++) {
    const p = particles[i];
    if (mouseX !== null && mouseY !== null) {
      const dx = p.x - mouseX;
      const dy = p.y - mouseY;
      const dist = Math.sqrt(dx * dx + dy * dy);
      if (dist < mouseRadius) {
        const force = (mouseRadius - dist) / mouseRadius;
        const angle = Math.atan2(dy, dx);
        p.vx = Math.cos(angle) * force * 35 + p.baseVx;
        p.vy = Math.sin(angle) * force * 35 + p.baseVy;
      } else {
        p.vx += (p.baseVx - p.vx) * 0.05;
        p.vy += (p.baseVy - p.vy) * 0.05;
      }
    } else {
      p.vx += (p.baseVx - p.vx) * 0.02;
      p.vy += (p.baseVy - p.vy) * 0.02;
    }
    p.x += p.vx;
    p.y += p.vy;
    if (p.x < -50 || p.x > canvas.width + 50 || p.y < -50 || p.y > canvas.height + 50) {
      particles.splice(i, 1);
      particles.push(createParticle());
      i--;
      continue;
    }
    ctx.fillStyle = 'white';
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
    ctx.fill();
  }

  requestAnimationFrame(animate);
}
animate();

document.addEventListener('mousemove', e => {
  mouseX = e.clientX;
  mouseY = e.clientY;
});
document.addEventListener('mouseout', () => {
  mouseX = null;
  mouseY = null;
});
window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>

</body>
</html>
